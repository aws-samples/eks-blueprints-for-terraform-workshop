---
title: "Bootstrap"
weight: 10
---

<!-- cspell:disable-next-line -->

::video{id=T_QT9fR73os}

In upcoming chapters, you will create ApplicationSets to register clusters and teams. Rather than creating these manually, we're going to automate them.

This bootstrap step deploys the initial ArgoCD ApplicationSet that generates Application that acts as a "parent." It monitors our **Platform** Git repository's bootstrap folder and automatically deploys any new Application/ApplicationSets we add.

![Bootstrap](/static/images/bootstrap/bootstrap-architecture.png)

<!-- prettier-ignore-start -->
:::code{showCopyAction=false showLineNumbers=true language=yaml highlightLines='13,16,24,25' }
apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: bootstrap
  namespace: argocd
spec:
  goTemplate: true
  goTemplateOptions: ["missingkey=error"]
  generators:
  - clusters:
      selector:
        matchLabels:
          cluster-role: "hub"  
  template:
    metadata:
      name: 'bootstrap'
      namespace: argocd
    spec:
      destination:
        namespace: argocd
        name: '{{.name}}'
      project: default
      source:
        repoURL: '{{ .metadata.annotations.platform_url }}'
        path: bootstrap
        targetRevision: HEAD
      syncPolicy:
        automated:
:::
<!-- prettier-ignore-end -->

Key Components:
- Line 13: Uses a Cluster Generator to target clusters labeled cluster-role: hub
- Line 16: The name of the Application generated by this set
- Line 24: Git source-of-truth (Platform repository). It gets value from the hub cluster annotations.
- Line 25: The specific directory(bootstrap) being monitored


### 1. Create bootstrap Application

<!-- prettier-ignore-start -->
:::code{showCopyAction=true showLineNumbers=false language=bash }

cp  $WORKSHOP_DIR/gitops/templates/bootstrap/bootstrap.yaml  ~/environment/basics
cd ~/environment/basics
kubectl apply -f bootstrap.yaml
:::
<!-- prettier-ignore-end -->

### 2. Validate bootstrap Application

Navigate to ArgoCD dashboard to see newly created bootstrap Application.

![Bootstrap](/static/images/bootstrap/bootstrap.png)
