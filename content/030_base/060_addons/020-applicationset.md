---
title: 'Applicationset and Generator '
weight: 20
---

The upcoming chapters will use labels (key/value pairs) to deploy workloads, namespaces, and addons to clusters using ArgoCD. For example, setting `workload_webstore = true` and `environment = staging` will have ArgoCD deploy a staging version of the webstore workload and associated namespace (including namespace, limitrange, quota, etc) on a cluster with these labels. Setting `enable_aws_load_balancer_controller = true` will have ArgoCD install the AWS Load Balancer controller on a cluster that has this label.

All of these workloads, namespaces, and addons are deployed by ArgoCD Application. An Application point to a Git source repository (namespace,workload,addon) and the destination cluster. The Applications are dynamically generated by ApplicationSet based on the values of the labels.

In the previous chapter you created Load Balancer addon manually. Manually creating  addons for each cluster would not scale well in an enterprise setting with many addons and clusters.

![applicationset](/static/images/multicluster-addons.png)


ApplicationSet is a great way to generate and manage a set of  Applications across multiple clusters and environments.
Think of  ApplicationSet as a factory of Applications.

![applicationset](/static/images/applicationset.png)

ApplicationSet utilizes different types of [Generator](https://argo-cd.readthedocs.io/en/stable/operator-manual/applicationset/Generators/) like cluster, git, matrix etc to generate Applications. 

Lets see how Cluster generator creates Applications. A cluster generator works with Cluster object. You have already seen the "hub-cluster" object in "Install ArgoCD" chapter.

![EKS Cluster](/static/images/argocd-cluster-object.png)


Lets say there are 3 cluster objects - hub-cluster, spoke-staging and spoke-prod with different labels (key value pairs).

The following is a code snippet of an ApplicationSet. The cluster generator creates one application because one cluster label matches the criteria.

```
  .
  .
  generators:
  - clusters:
      selector:
        matchLabels:
          environment: hub
  .
  .
```
![applicationset](/static/images/applicationset-controlplane.png)

The following generator creates 2 applications because 2 cluster labels match the criteria.

```
  generators:
  - clusters:
      selector:
        matchLabels:
          workloads: true
```
![applicationset](/static/images/applicationset-workloads.png)

You can add addiational labels to meet your criteria.